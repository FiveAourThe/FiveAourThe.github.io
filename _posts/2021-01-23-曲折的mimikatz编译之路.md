---
layout:     post
title:      曲折的mimikatz编译之路
subtitle:   曲折的mimikatz编译之路
date:       2021-01-23
author:     木已成舟
header-img: img/post-bg-rwd.jpg
catalog: 	 true
tags:
    - 内网渗透
---

mimikatz在后渗透中作用非常大，但是目前已经被各大杀毒软件查杀，自己编译源码的目的是为了更好的免杀。

## 0x00 下载工具及源码

首先需要下载VisualStudio和mimikatz的源代码，VisualStudio使用Community版本的就够了。

- `https://visualstudio.microsoft.com/zh-hans/`
- `https://github.com/gentilkiwi/mimikatz`

## 0x01 安装及配置VS

安装VisualStudio就不多说了，傻瓜式安装，需要注意的是左边勾选`使用C++的桌面开发`和`通用Winodws平台开发`，右边至少勾选下SDK（后面缺东西还可以安装），点击修改按钮进行下载安装。

![20210123171832](../../../../img/20210123172819.png)

## 0x03 编译mimikatz

一切安装完毕后，进入mimikatz源码的目录，点击`mimikatz.sln`打开该工程。加载完毕就提示我少安装了2个东西，于是我按照提示，打开`Visual Studio installer`进行安装。

![20210123173412](../../../../img/20210123173412.png)

再次打开mimikatz工程，发现还是存在问题，但这个问题不影响mimikatz的编译。

![20210123173156](../../../../img/20210123173156.png)

在编译开始前还需要修改下编译配置，以免报错导致编译失败。

![20210123214726](../../../../img/20210123214942.png)

![20210123214557](../../../../img/20210123214557.png)

如果还是不行的话，请确认以下几个设置是否设置正确。

![20210123215256](../../../../img/20210123215256.png)

![20210123215416](../../../../img/20210123215416.png)

![20210123215506](../../../../img/20210123215506.png)



当一切准备就绪，关闭杀毒软件，开始激动人心的编译时刻，结局竟然是这样子的。

![20210123173526](../../../../img/20210123173526.png)

通过百度寻找解决方法，无果。自己摸索了十几分钟，发现没有设置启动项目，尴尬了老铁。

![20210123173612](../../../../img/20210123173612.png)

再次点击编译，终于编译成功。

![20210123173639](../../../../img/20210123173639.png)

