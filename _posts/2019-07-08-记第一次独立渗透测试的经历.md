---
layout:     post
title:      记第一次独立渗透测试的经历
subtitle:   渗透测试之信息搜集
date:       2019-07-08
author:     看不尽的尘埃
header-img: img/post-bg-ios9-web.jpg
catalog: 	 true
tags:
    - 渗透测试
    - 信息搜集
---
# 闲谈
​	最近做了一次“几乎只有一个人”的渗透测试，时长差不多一个星期。写完渗透测试报告后，我开始反思自己，在这次渗透测试过程中收获到了什么？因此有了本文！

​	下面来简短的说一下这次在渗透测试中遇到的事儿...

​	虽然没有拿到一个服务器的权限，但是找到了一个严重的漏洞就是最近很火的CVE-2019-0708 Windows远程桌面服务漏洞了。当时通过Nmap扫描端口时发现某一个非标端口识别出来是`ssl/blackice-icecap?`，而通过Nessus扫描器扫描结果确是`msrdp`。因此，在做端口扫描的时候还是需要综合多款工具来判断的，不要盲目相信Nmap的端口识别能力。

​	记得某位大佬说过“你的*知识面*,*决定*着你的攻击面”，经过这次渗透测试中，我充分意识到了这一点，Nmap识别到某端口上允许着Java RMI，当时没意识到这也是可能存在漏洞的一个点。后来在后期没思路的时候逛wooyun案例的时候，发现了与Java RMI相关的案例，于是通过msf的做了漏洞检测，虽然没成功，但也给自己涨了见识。

​	在渗透测试的过程中，我发现自己毕竟乱，想到哪里就测试哪里，没有规范性的进行渗透测试，信息搜集阶段没搜集全就开始搞漏洞挖掘和漏洞扫描了。后来像利用漏洞的时候，才发现有服务器的信息没搜集，不知道中间件是什么，服务器是Windows呢还是Linux呢？

​	还有很重要的一点就是别老是怼一个漏洞，登录后从URL地址那里看到URL类似这样的`index.php?s=/user/index`，我就想着搞一个图片马+文件包含就可能直接拿到WebShelll了，于是我就花了半天的时间怼文件包含漏洞，最后发现时间来不及了...

​	下面我总结了一下渗透测试中信息搜集阶段需要搜集的哪些信息吧，为了以后的渗透测试更加规范，搜集到的信息更加的全面！

​	![](../../../../img/Information_Collection_of_Penetest.png)